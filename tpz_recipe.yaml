$engine: 3
$onesync: on
$steamRequired: true
name: TPZCORE
author: nosmakos
description: TPZ-CORE Official txAdmin recipe! This will setup automatically the TPZ-CORE Framework.

variables:
    steam_webApiKey: "none"

tasks:

# Recipe Specific server.cfg files
  - action: download_github
    src: https://github.com/TPZ-CORE/TPZ_txAdmin
    ref: main
    dest: ./temp/tpz_txAdminRecipe
  
  - action: move_path
    src: ./temp/tpz_txAdminRecipe/server.cfg
    dest: ./server.cfg
  
# Run Database SQL
  - action: connect_database
  - action: query_database
    file: ./temp/tpz_txAdminRecipe/database.sql
    
# Move the icon to the root
  - action: move_path
    src: ./temp/tpz_txAdminRecipe/icon.png
    dest: ./icon.png

# Download default CFX resources
  - action: download_github
    src: https://github.com/citizenfx/cfx-server-data
    ref: master
    subpath: resources
    dest: ./resources/

# Remove chat path
  - action: remove_path
    path: ./resources/[CFX]/[gameplay]/chat

# Download pma-voice
  - action: download_github
    src: https://github.com/AvarianKnight/pma-voice
    ref: main
    dest: ./resources/[standalone]/pma-voice

# Download oxmysql
  - action: download_github
    src: https://github.com/TPZ-CORE/oxmysql
    ref: main
    subpath: oxmysql
    dest: ./resources/[standalone]/oxmysql

# Download weathersync
  - action: download_github
    src: https://github.com/TPZ-CORE/weathersync
    ref: main
    subpath: weathersync
    dest: ./resources/[standalone]/weathersync

# Download interiors_ipl
  - action: download_github
    src: https://github.com/TPZ-CORE/interiors_ipl
    ref: main
    subpath: interiors_ipl
    dest: ./resources/[standalone]/interiors_ipl
    
# Download TPZ-CORE CORE
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_core
    ref: main
    subpath: tpz_core
    dest: ./temp/[TPZ]/tpz_core
    
# Download TPZ-CORE Characters
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_characters
    ref: main
    subpath: tpz_characters
    dest: ./temp/[TPZ]/tpz_characters

  # Download TPZ-CORE Inventory
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inventory
    ref: main
    subpath: tpz_inventory
    dest: ./temp/[TPZ]/tpz_inventory
    
  # Download TPZ-CORE Inventory Trade Addon
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inventory_trade
    ref: main
    subpath: tpz_inventory_trade
    dest: ./temp/[TPZ]/tpz_inventory_trade

  # Download TPZ-CORE Weapons
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_weapons
    ref: main
    subpath: tpz_weapons
    dest: ./temp/[TPZ]/tpz_weapons

  # Download TPZ-CORE Inputs
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inputs
    ref: main
    subpath: tpz_inputs
    dest: ./temp/[TPZ]/tpz_inputs

  # Download TPZ-CORE Notify
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_notify
    ref: main
    subpath: tpz_notify
    dest: ./temp/[TPZ]/tpz_notify

  # Download TPZ-CORE Menu Base
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_menu_base
    ref: main
    subpath: tpz_menu_base
    dest: ./temp/[TPZ]/tpz_menu_base

  # Download TPZ-CORE Skillcheck
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_skillcheck
    ref: main
    subpath: tpz_skillcheck
    dest: ./temp/[TPZ]/tpz_skillcheck

  # Download TPZ-CORE Vehicle Fix
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_vehiclefixes
    ref: main
    subpath: tpz_vehiclefixes
    dest: ./temp/[TPZ]/tpz_vehiclefixes

  # Download TPZ-CORE Discord Whitelist
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_discord_whitelist
    ref: main
    subpath: tpz_discord_whitelist
    dest: ./temp/[TPZ]/tpz_discord_whitelist

  # Download TPZ-CORE Boilerplate
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_boilerplate
    ref: main
    subpath: tpz_boilerplate
    dest: ./temp/[TPZ]/tpz_boilerplate

  # Download TPZ-CORE Teleports
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_teleports
    ref: main
    subpath: tpz_teleports
    dest: ./temp/[TPZ]/tpz_teleports

  # Download TPZ-CORE Doorlocks
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_doorlocks
    ref: main
    subpath: tpz_doorlocks
    dest: ./temp/[TPZ]/tpz_doorlocks

  # Download TPZ-CORE Object Loader
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_objectloader
    ref: main
    subpath: tpz_objectloader
    dest: ./temp/[TPZ]/tpz_objectloader

  # Download TPZ-CORE Leveling
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_leveling
    ref: main
    subpath: tpz_leveling
    dest: ./temp/[TPZ]/tpz_leveling

# Download TPZ-CORE Crafting
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_crafting
    ref: main
    subpath: tpz_crafting
    dest: ./temp/[TPZ]/tpz_crafting

# Download TPZ-CORE Loot NPCs
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_lootnpcs
    ref: main
    subpath: tpz_lootnpcs
    dest: ./temp/[TPZ]/tpz_lootnpcs

  # Download TPZ-CORE Metabolism
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_metabolism
    ref: main
    subpath: tpz_metabolism
    dest: ./temp/[TPZ]/tpz_metabolism

  # Download TPZ-CORE HUD
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_hud
    ref: main
    subpath: tpz_hud
    dest: ./temp/[TPZ]/tpz_hud

  # Download TPZ-CORE Society
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_society
    ref: main
    subpath: tpz_society
    dest: ./temp/[TPZ]/tpz_society

  # Download TPZ-CORE Stores
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_stores
    ref: main
    subpath: tpz_stores
    dest: ./temp/[TPZ]/tpz_stores

  # Download TPZ-CORE Fishing
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_fishing
    ref: main
    subpath: tpz_fishing
    dest: ./temp/[TPZ]/tpz_fishing

  # Download TPZ-CORE Guarma
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_guarma
    ref: main
    subpath: tpz_guarma
    dest: ./temp/[TPZ]/tpz_guarma

  # Download TPZ-CORE Lumberjack
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_lumberjack
    ref: main
    subpath: tpz_lumberjack
    dest: ./temp/[TPZ]/tpz_lumberjack

  # Download TPZ-CORE Mining
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_mining
    ref: main
    subpath: tpz_mining
    dest: ./temp/[TPZ]/tpz_mining
    
  # Download TPZ-CORE Gold Panning
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_goldpanning
    ref: main
    subpath: tpz_goldpanning
    dest: ./temp/[TPZ]/tpz_goldpanning

  # Download TPZ-CORE Zone Notify
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_zonenotify
    ref: main
    subpath: tpz_zonenotify
    dest: ./temp/[TPZ]/tpz_zonenotify

  # Download TPZ-CORE Versions
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_versions
    ref: main
    subpath: tpz_versions
    dest: ./temp/[TPZ]/tpz_versions

  # Download TPZ-CORE Users Inactivity
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_users_inactivity
    ref: main
    subpath: tpz_users_inactivity
    dest: ./temp/[TPZ]/tpz_users_inactivity

# Remove Old Chat
  - action: remove_path
    path: ./resources/[cfx-default]/[gameplay]/chat

# Move all TPZ-CORE resources and files to root for txadmin
  - action: move_path
    src: ./temp/[TPZ]
    dest: ./resources/[TPZ]

# Clean up temporary files
  - action: remove_path
    path: ./temp
  - action: remove_path
    path: ./tmp
