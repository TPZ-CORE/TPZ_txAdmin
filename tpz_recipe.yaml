$engine: 3
$onesync: on
$steamRequired: true
name: TPZCORE
author: nosmakos
description: TPZ-CORE Official txAdmin recipe! This will setup automatically the TPZ-CORE Framework.

variables:
    steam_webApiKey: "none"

tasks:

# Recipe Specific server.cfg files
  - action: download_github
    src: https://github.com/TPZ-CORE/TPZ_txAdmin
    ref: main
    dest: ./temp/tpz_txAdminRecipe
  
  - action: move_path
    src: ./temp/tpz_txAdminRecipe/server.cfg
    dest: ./server.cfg
  
# Run Database SQL
  - action: connect_database
  - action: query_database
    file: ./temp/tpz_txAdminRecipe/database.sql
    
# Move the icon to the root
  - action: move_path
    src: ./temp/tpz_txAdminRecipe/icon.png
    dest: ./icon.png

# Download default CFX resources
  - action: download_github
    src: https://github.com/citizenfx/cfx-server-data
    ref: master
    subpath: resources
    dest: ./resources/

# Remove chat path
  - action: remove_path
    path: ./resources/[CFX]/[gameplay]/chat
    
# Download TPZ-CORE CORE
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_core
    ref: master
    subpath: tpz_core
    dest: ./temp/[TPZ-ESSENTIALS]/tpz_core
    
# Download TPZ-CORE Characters
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_characters
    ref: master
    subpath: tpz_characters
    dest: ./temp/[TPZ-ESSENTIALS]/tpz_characters

  # Download TPZ-CORE Inventory
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inventory
    ref: master
    subpath: tpz_inventory
    dest: ./temp/[TPZ-ESSENTIALS]/tpz_inventory
    
  # Download TPZ-CORE Inventory Trade Addon
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inventory_trade
    ref: master
    subpath: tpz_inventory_trade
    dest: ./temp/[TPZ-ESSENTIALS]/tpz_inventory_trade

  # Download TPZ-CORE Inputs
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_inputs
    ref: master
    subpath: tpz_inputs
    dest: ./temp/[TPZ-UTILITIES]/tpz_inputs

  # Download TPZ-CORE Notify
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_notify
    ref: master
    subpath: tpz_notify
    dest: ./temp/[TPZ-UTILITIES]/tpz_notify

  # Download TPZ-CORE Menu Base
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_menu_base
    ref: master
    subpath: tpz_menu_base
    dest: ./temp/[TPZ-UTILITIES]/tpz_menu_base

  # Download TPZ-CORE Skillcheck
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_skillcheck
    ref: master
    subpath: tpz_skillcheck
    dest: ./temp/[TPZ-UTILITIES]/tpz_skillcheck

  # Download TPZ-CORE Vehicle Fix
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_vehiclefixes
    ref: master
    subpath: tpz_vehiclefixes
    dest: ./temp/[TPZ-UTILITIES]/tpz_vehiclefixes

  # Download TPZ-CORE Discord Whitelist
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_discord_whitelist
    ref: master
    subpath: tpz_discord_whitelist
    dest: ./temp/[TPZ]/tpz_discord_whitelist

  # Download TPZ-CORE Boilerplate
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_boilerplate
    ref: master
    subpath: tpz_boilerplate
    dest: ./temp/[TPZ-UTILITIES]/tpz_boilerplate

  # Download TPZ-CORE Teleports
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_teleports
    ref: master
    subpath: tpz_teleports
    dest: ./temp/[TPZ]/tpz_teleports

  # Download TPZ-CORE Doorlocks
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_doorlocks
    ref: master
    subpath: tpz_doorlocks
    dest: ./temp/[TPZ]/tpz_doorlocks

  # Download TPZ-CORE Object Loader
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_objectloader
    ref: master
    subpath: tpz_objectloader
    dest: ./temp/[TPZ]/tpz_objectloader

  # Download TPZ-CORE Leveling
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_leveling
    ref: master
    subpath: tpz_leveling
    dest: ./temp/[TPZ-UTILITIES]/tpz_leveling

  # Download TPZ-CORE Metabolism
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_metabolism
    ref: master
    subpath: tpz_metabolism
    dest: ./temp/[TPZ]/tpz_metabolism

  # Download TPZ-CORE HUD
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_hud
    ref: master
    subpath: tpz_hud
    dest: ./temp/[TPZ]/tpz_hud

  # Download TPZ-CORE Society
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_society
    ref: master
    subpath: tpz_society
    dest: ./temp/[TPZ]/tpz_society

  # Download TPZ-CORE Fishing
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_fishing
    ref: master
    subpath: tpz_fishing
    dest: ./temp/[TPZ]/tpz_fishing

  # Download TPZ-CORE Guarma
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_guarma
    ref: master
    subpath: tpz_guarma
    dest: ./temp/[TPZ]/tpz_guarma

  # Download TPZ-CORE Lumberjack
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_lumberjack
    ref: master
    subpath: tpz_lumberjack
    dest: ./temp/[TPZ]/tpz_lumberjack

  # Download TPZ-CORE Mining
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_mining
    ref: master
    subpath: tpz_mining
    dest: ./temp/[TPZ]/tpz_mining
    
  # Download TPZ-CORE Gold Panning
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_goldpanning
    ref: master
    subpath: tpz_goldpanning
    dest: ./temp/[TPZ]/tpz_goldpanning

  # Download TPZ-CORE Versions
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_versions
    ref: master
    subpath: tpz_versions
    dest: ./temp/[TPZ-UTILITIES]/tpz_versions

  # Download TPZ-CORE Users Inactivity
  - action: download_github
    src: https://github.com/TPZ-CORE/tpz_users_inactivity
    ref: master
    subpath: tpz_users_inactivity
    dest: ./temp/[TPZ]/tpz_users_inactivity

# Remove Old Chat
  - action: remove_path
    path: ./resources/[cfx-default]/[gameplay]/chat

# Move all TPZ-CORE resources and files to root for txadmin
  - action: move_path
    src: ./temp/[TPZ]
    dest: ./resources/[TPZ]

# Clean up temporary files
  - action: remove_path
    path: ./temp
  - action: remove_path
    path: ./tmp
